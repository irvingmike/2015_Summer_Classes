<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<head>
<title>XML ID Transformation Example</title>
<style type="text/css">
body {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 16px;
	color: #0000FF;
}
.title {
	font-size: 1.5em;
	color: #000099;
	text-align:center;
}
.caption {
	font-weight: 700;
}
.eoc {
	color: #ffff00;
	background-color:black;
	font-weight: 700;
	text-align:center;
}
.noorders {
    font-weight: 700;
	text-align:center;
	color:#AA0300
}
</style>
</head>
<body>
<table border="0" cellspacing="3" cellpadding="3">
    <tr>
        <td colspan="4" class="title">Customer Order Information</td>
     </tr>
    <tr><td colspan="4"><img src="bluefade.gif" border="0"/></td></tr>

<xsl:for-each select="customers/customer">

    <tr>
        <td>Name</td>
        <td colspan="3"><xsl:value-of select="name"/></td>
    </tr>
    <tr>
        <td>ID Number</td>
        <td colspan="3"><xsl:value-of select="@NUMBER"/></td>
    </tr>
    <tr>
        <td>Address</td>
        <td colspan="3"><xsl:value-of select="address"/></td>
    </tr>

    <!-- test to see if the tree fragment second address exists -->
    <xsl:if test="secondAddress">
        <tr>
            <td>Second Address</td>
            <td colspan="3"><xsl:value-of select="secondAddress"/></td>
        </tr>
    </xsl:if>


    <xsl:for-each select="order">
	
        <tr>
	    <td align="right"><img src="0004100n.gif" border="0"/></td>
            <td>Order Number</td>
            <td colspan="2"><xsl:value-of select="order_number"/></td>
        </tr>
        <tr>
	    <td align="right"><img src="000k1002.gif" border="0"/></td>
            <td>Order Date</td>
            <td colspan="2"><xsl:value-of select="order_date"/></td>
        </tr>


        <xsl:for-each select="item">
            <tr>
                <td><img src="spacer.gif" border="0"/></td>
                <td align="right"><img src="0000100n.gif" border="0"/></td>
                <td>Item Number</td>
                <td><xsl:value-of select="item_number"/></td>
            </tr>
            <tr>
                <td><img src="spacer.gif" border="0"/></td>
                <td align="right"><img src="0000100n.gif" border="0"/></td>
                <td>Quantity</td>
                <td><xsl:value-of select="quantity"/></td>
            </tr>
            <tr>
                <td><img src="spacer.gif" border="0" /></td>
                <td align="right"><img src="0000100n.gif" border="0"/></td>
                <td>Unit</td>
                
                <xsl:choose>
                    <xsl:when test="quantity/@unit='P'">
                        <td>Piece</td>
                    </xsl:when>
                    <xsl:when test="quantity/@unit='C'">
                        <td>Case</td>
                    </xsl:when>
                    <xsl:when test="quantity/@unit='K'">
                        <td>Kilogram</td>
                    </xsl:when>
                    <xsl:when test="quantity/@unit='D'">
                        <td>Dozen</td>
                    </xsl:when>
                    <xsl:when test="quantity/@unit='L'">
                        <td>Pound</td>
                    </xsl:when>
                    <xsl:when test="quantity/@unit='M'">
                        <td>Metric Ton</td>
                    </xsl:when>
                    <xsl:otherwise>
                        <td>Unknown Unit</td>
                    </xsl:otherwise>
                </xsl:choose>

            </tr>
            <tr>
                <td><img src="spacer.gif" border="0"/></td>
                <td align="right"><img src="0000100n.gif" border="0"/></td>
                <td>Price</td>
                <td><xsl:value-of select="price"/></td>
            </tr>
            <tr>
                <td colspan="2"><img src="spacer.gif" border="0"/></td>
                <td colspan="2"><hr color="blue"/></td>
            </tr>
	</xsl:for-each>
	<!-- End of Item -->
        <tr>
            <td><img src="spacer.gif" border="0"/></td>
            <td colspan="3"><hr color="green"/></td>
        </tr>

    </xsl:for-each>
	
    <!-- End of Order -->
	
    <tr>
        <td colspan="3">Account Balance</td>
        <td><xsl:value-of select="current_balance"/></td>
    </tr>
        <!-- String test not(string(order)) -->
	<xsl:if test="not(string(order))">

	    <!-- Node test -->
	    <!-- <xsl:if test="not(order)"> -->

            <tr class="noorders">
	        <td colspan="4">---------- This customer has no orders ----------<br/><br/></td>
            </tr>
        </xsl:if>
	
    <tr>
        <td colspan="4" class="eoc">End of Customer</td>
    </tr>
    <tr>
            <td colspan="4"><img src="spacer.gif" height="10" border="0"/></td>
    </tr>

</xsl:for-each>
<!-- End of Customer -->
</table>
</body>
</html>
</xsl:template>
</xsl:stylesheet>